
//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						STAT BONUSES
//__________________________________________________________________________________
//__________________________________________________________________________________


//  !!!  NEED TO PATCH BONUSES ONTO JOINABLE NPCS!! (MAYBE?) (& NON-JOINABLE??)


//COPY MARKER FILE___________________________________________________________________
//
COPY ~scales_of_balance/misc/d5_stats.d5~ ~override~
//___________________________________________________________________________________


//EDIT STAT BONUSES__________________________________________________________________
//
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_yaras.d5~ BEGIN
  COPY ~scales_of_balance/stats/dexmod.2da~ ~override~
END
COPY ~scales_of_balance/stats/strmod.2da~ ~override~
COPY ~scales_of_balance/stats/strmodex.2da~ ~override~
COPY ~scales_of_balance/misc/mxsplwis.2da~ ~override~
//COPY ~scales_of_balance/stats/intmod.2da~ ~override~
COPY_EXISTING ~abclasrq.2da~ ~override~
	REPLACE_TEXTUALLY ~ 0~ ~ 7~
	REPLACE_TEXTUALLY ~ 17~ ~ 16~
	BUT_ONLY
//___________________________________________________________________________________

//EDIT DEMIHUMAN STATS_______________________________________________________________
//
COPY ~scales_of_balance/misc/abracead.2da~ ~override~
//___________________________________________________________________________________


//EDIT RACE STRINGS__________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
	COPY_EXISTING ~racetext.2da~ ~override~
		SET_2DA_ENTRY 3 3 1 RESOLVE_STR_REF (@2011)
		SET_2DA_ENTRY 4 3 1 RESOLVE_STR_REF (@2013)
		SET_2DA_ENTRY 5 3 1 RESOLVE_STR_REF (@2016)
		SET_2DA_ENTRY 6 3 1 RESOLVE_STR_REF (@2012)
		SET_2DA_ENTRY 7 3 1 RESOLVE_STR_REF (@2015)
		SET_2DA_ENTRY 8 3 1 RESOLVE_STR_REF (@2014)
		SET_2DA_ENTRY 9 3 1 RESOLVE_STR_REF (@2017)
	BUT_ONLY
  ACTION_IF (FILE_EXISTS_IN_GAME ~sodrace.2da~) BEGIN
	COPY_EXISTING ~sodrace.2da~ ~override~
		SET_2DA_ENTRY 3 3 1 RESOLVE_STR_REF (@2011)
		SET_2DA_ENTRY 4 3 1 RESOLVE_STR_REF (@2013)
		SET_2DA_ENTRY 5 3 1 RESOLVE_STR_REF (@2016)
		SET_2DA_ENTRY 6 3 1 RESOLVE_STR_REF (@2012)
		SET_2DA_ENTRY 7 3 1 RESOLVE_STR_REF (@2015)
		SET_2DA_ENTRY 8 3 1 RESOLVE_STR_REF (@2014)
		SET_2DA_ENTRY 9 3 1 RESOLVE_STR_REF (@2017)
	BUT_ONLY
  END
END
//___________________________________________________________________________________


//EDIT STAT STRINGS__________________________________________________________________
//
  STRING_SET 9582 @2001 
  STRING_SET 9583 @2003 
  STRING_SET 9584 @2002 
  STRING_SET 9585 @2004 
  STRING_SET 9586 @2005 
  STRING_SET 9587 @2006 
//___________________________________________________________________________________


//CHARISMA BONUSES___________________________________________________________________
//
COPY ~scales_of_balance/stats/savecndh.2da~ ~override~
COPY ~scales_of_balance/stats/savecng.2da~ ~override~

ACTION_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
	COPY ~scales_of_balance/stats/old/d5_palch.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_cha16.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_cha17.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_cha18.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_cha19.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_chari.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_chari.cre~ ~override~
	COMPILE ~scales_of_balance/stats/old/d5_chari.baf~
END
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
	COPY ~scales_of_balance/stats/new/d5_chari.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_palch.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_savch.spl~ ~override~
	COPY ~scales_of_balance/misc/d5_luckp.spl~ ~override~
END
//___________________________________________________________________________________

//EXCLUDE PALADINS___________________________________________________________________
//
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~9~ "rows"
	FOR ( index = 2 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 5 9 modclab
		READ_2DA_ENTRY %index% 8 9 modclass
		DEFINE_ASSOCIATIVE_ARRAY d5_intel_array BEGIN "%modclab%" => "%modclass%" END
	END
BUT_ONLY
ACTION_PHP_EACH d5_intel_array AS boo => zoo BEGIN
	ACTION_IF (%zoo% = 6) AND (FILE_EXISTS_IN_GAME ~%boo%.2da~) THEN BEGIN
		COPY_EXISTING ~%boo%.2da~ ~override~
			LPM remove_blank_lines
			APPEND_FILE ~scales_of_balance/stats/charisma_paladin.txt~
			BUT_ONLY
	END
END
//___________________________________________________________________________________

//ADD CHARISMA BONUSES_______________________________________________________________
//
COPY_EXISTING ~clabpr01.2da~ ~override~
			~clabdr01.2da~ ~override~
//			~clabpa01.2da~ ~override~
			~clabrn01.2da~ ~override~
			~clabfi01.2da~ ~override~
			~clabth01.2da~ ~override~
			~clabba01.2da~ ~override~
			~clabmo01.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~9~ "rows"
	FOR ( index = 1 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 5 9 modclab
		READ_2DA_ENTRY %index% 8 9 modclass
		DEFINE_ASSOCIATIVE_ARRAY d5_char_array BEGIN "%modclab%" => "%modclass%" END
	END
BUT_ONLY
ACTION_PHP_EACH d5_char_array AS pu => poo BEGIN
	ACTION_IF (FILE_EXISTS_IN_GAME ~%pu%.2da~) THEN BEGIN
		COPY_EXISTING ~%pu%.2da~ ~override~
			LPM remove_blank_lines
			APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
		BUT_ONLY
	END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma01.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma01.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma02.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma02.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma03.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma03.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma04.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma04.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma05.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma05.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma06.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma06.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma07.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma07.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma08.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma08.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma09.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma09.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/charisma_bonuses.txt~
END
//__________________________________________________________________________________

//INTELLIGENCE BONUSES______________________________________________________________
//
INCLUDE ~scales_of_balance/ini/stats.ini~

APPEND ~splprot.2da~ ~D5_CRIT_LT%TAB%38%TAB%-1%TAB%2~
APPEND ~splprot.2da~ ~D5_CRIT_GTEQ%TAB%38%TAB%-1%TAB%4~

COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
    	READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
		PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~D5_CRIT_LT~ BEGIN
			SET crit_lt_row = %row%
      	END
		PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~D5_CRIT_GTEQ~ BEGIN
			SET crit_gteq_row = %row%
      	END
	END
BUT_ONLY

COPY ~scales_of_balance/misc/d5_wisp1.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp2.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp3.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp4.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp5.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp6.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp7.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp8.spl~ ~override~
COPY ~scales_of_balance/misc/d5_wisp9.spl~ ~override~
COPY ~scales_of_balance/stats/d5_noint.spl~ ~override~
COPY ~scales_of_balance/stats/d5_nint2.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint3.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint4.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint5.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint6.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint7.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint8.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint9.eff~ ~override~
COPY ~scales_of_balance/stats/d5_nint0.eff~ ~override~

ACTION_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
	COPY ~scales_of_balance/stats/old/d5_intcr.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_intcr.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_crit1.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_crit2.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_crit3.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_crit0.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int12.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int13.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int14.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int15.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int16.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int17.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int18.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int19.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int20.spl~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int12.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int13.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int14.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int15.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int16.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int17.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int18.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int19.cre~ ~override~
	COPY ~scales_of_balance/stats/old/d5_int20.cre~ ~override~
	COMPILE ~scales_of_balance/stats/old/d5_intcr.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int12.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int13.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int14.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int15.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int16.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int17.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int18.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int19.baf~
	COMPILE ~scales_of_balance/stats/old/d5_int20.baf~
END
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
	COPY ~scales_of_balance/stats/new/d5_intcr.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_crit0.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_critb.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_crit2.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_crit3.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_crit0.eff~ ~override~
		WRITE_LONG 0x1c %int_crit_1%
		WRITE_LONG 0x20 %crit_lt_row%
	COPY ~scales_of_balance/stats/new/d5_crit2.eff~ ~override~
		WRITE_LONG 0x1c %int_crit_2%
		WRITE_LONG 0x20 %crit_gteq_row%
	COPY ~scales_of_balance/stats/new/d5_crit3.eff~ ~override~
		WRITE_LONG 0x1c %int_crit_3%
		WRITE_LONG 0x20 %crit_gteq_row%
	COPY ~scales_of_balance/stats/new/d5_int12.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int13.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int14.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int15.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int16.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int17.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int18.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int19.spl~ ~override~
	COPY ~scales_of_balance/stats/new/d5_int20.spl~ ~override~
END
//___________________________________________________________________________________

//ADD CRIT PENALTIES________________________________________________________________
//
COPY_EXISTING ~clabpr01.2da~ ~override~
			~clabdr01.2da~ ~override~
			~clabpa01.2da~ ~override~
			~clabrn01.2da~ ~override~
			~clabfi01.2da~ ~override~
			~clabth01.2da~ ~override~
			~clabba01.2da~ ~override~
			~clabmo01.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~9~ "rows"
	FOR ( index = 1 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 5 9 modclab
		READ_2DA_ENTRY %index% 8 9 modclass
		DEFINE_ASSOCIATIVE_ARRAY d5_char_array BEGIN "%modclab%" => "%modclass%" END
	END
BUT_ONLY
ACTION_PHP_EACH d5_char_array AS pu => poo BEGIN
	ACTION_IF (FILE_EXISTS_IN_GAME ~%pu%.2da~) THEN BEGIN
		COPY_EXISTING ~%pu%.2da~ ~override~
			LPM remove_blank_lines
			PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
				APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
			END
			PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
				APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
			END
		BUT_ONLY
	END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma01.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma01.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma02.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma02.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma03.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma03.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma04.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma04.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma05.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma05.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma06.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma06.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma07.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma07.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma08.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma08.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma09.2da~) THEN BEGIN
	COPY ~scales_of_balance/misc/clabma09.2da~ ~override~
		LPM remove_blank_lines
		PATCH_IF NOT GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/old/crit_changes.txt~
		END
		PATCH_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN
			APPEND_FILE ~scales_of_balance/stats/new/crit_changes.txt~
		END
END
//__________________________________________________________________________________

//ADD INTELLIGENCE BONUS SPELLS_____________________________________________________
//
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~9~ "rows"
	FOR ( index = 2 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 5 9 modclab
		READ_2DA_ENTRY %index% 8 9 modclass
		DEFINE_ASSOCIATIVE_ARRAY d5_intel_array BEGIN "%modclab%" => "%modclass%" END
	END
BUT_ONLY
ACTION_PHP_EACH d5_intel_array AS boo => zoo BEGIN
	ACTION_IF (%zoo% = 5) AND (FILE_EXISTS_IN_GAME ~%boo%.2da~) BEGIN
		COPY_EXISTING ~%boo%.2da~ ~override~
			LPM remove_blank_lines
			APPEND_FILE ~scales_of_balance/stats/intelligence_bards.txt~
	END
	ACTION_IF (%zoo% = 1) AND (FILE_EXISTS_IN_GAME ~%boo%.2da~) BEGIN
		COPY_EXISTING ~%boo%.2da~ ~override~
			LPM remove_blank_lines
			APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
	END
	ACTION_IF (%zoo% = 19) AND (FILE_EXISTS_IN_GAME ~%boo%.2da~) BEGIN
		COPY_EXISTING ~%boo%.2da~ ~override~
			LPM remove_blank_lines
			APPEND_FILE ~scales_of_balance/stats/intelligence_sorcerers.txt~
	END
END
COPY_EXISTING ~clabba01.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_bards.txt~
ACTION_IF (FILE_EXISTS_IN_GAME ~clabma01.2da~) BEGIN
	COPY_EXISTING ~clabma01.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma01.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma01.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma02.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma02.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma03.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma03.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma04.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma04.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma05.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma05.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma06.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma06.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma07.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma07.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma08.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma08.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
ACTION_IF NOT (FILE_EXISTS_IN_GAME ~clabma09.2da~) BEGIN
	COPY ~scales_of_balance/misc/clabma09.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~scales_of_balance/stats/intelligence_wizards.txt~
END
//__________________________________________________________________________________

/*
END

ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ BEGIN

  APPEND ~splprot.2da~ ~STR_EQ%TAB%36%TAB%-1%TAB%1%WNL%DEX_EQ%TAB%40%TAB%-1%TAB%1%WNL%CON_EQ%TAB%41%TAB%-1%TAB%1%WNL%INT_EQ%TAB%38%TAB%-1%TAB%1%WNL%WIS_EQ%TAB%39%TAB%-1%TAB%1%WNL%CHR_EQ%TAB%42%TAB%-1%TAB%1~

END
*/

CLEAR_ARRAYS
