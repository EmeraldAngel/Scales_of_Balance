BACKUP ~scales_of_balance/backup~
AUTHOR ~SubtleD~

VERSION ~v3.2~
README ~scales_of_balance/readme-sob.html~

ALWAYS

	INCLUDE ~scales_of_balance/lib/alter_effect.tpa~

	INCLUDE ~scales_of_balance/lib/delete_effect.tpa~

	INCLUDE ~scales_of_balance/lib/remove_lines.tpa~

	INCLUDE ~scales_of_balance/lib/spell_to_innate.tpa~

	INCLUDE ~scales_of_balance/lib/fl#add_kit_ee.tpa~

END

LANGUAGE
  ~English~
  ~english~
  ~scales_of_balance/language/english/setup.tra~

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						ITEM TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @1000
DESIGNATED 100
//REQUIRE_PREDICATE NOT GAME_IS ~iwdee~ @8

INCLUDE ~scales_of_balance/components/100_items.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						STATS, SAVES
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @2000
DESIGNATED 200

INCLUDE ~scales_of_balance/components/200_stats.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						HIT DICE CHANGES
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @2100
DESIGNATED 210

INCLUDE ~scales_of_balance/components/210_hit_dice.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						XP TABLE CHANGES
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @2200
DESIGNATED 220

INCLUDE ~scales_of_balance/components/220_xp_tables.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						SPELL TABLE CHANGES
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @2300
DESIGNATED 230

INCLUDE ~scales_of_balance/components/230_spell_tables.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						PROFICIENCY OVERHAUL
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @2500
DESIGNATED 250
REQUIRE_PREDICATE (MOD_IS_INSTALLED "TOBEX.TP2" "100") OR (GAME_IS ~bgee bg2ee iwdee~) @1

INCLUDE ~scales_of_balance/components/250_proficiency_overhaul.tpa~
//__________________________________________________________________________________


/*
//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						WSPATCK FOR ALL
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @2700
DESIGNATED 270
REQUIRE_PREDICATE GAME_IS ~bgee bg2ee iwdee~ @1
REQUIRE_PREDICATE (NOT FILE_EXISTS_IN_GAME ~d5_apr.d5~) @3
REQUIRE_PREDICATE (NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~) @3

INCLUDE ~scales_of_balance/components/270_apr_on_spec.tpa~
//__________________________________________________________________________________
*/


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						WARRIOR TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @3000
DESIGNATED 300

INCLUDE ~scales_of_balance/components/300_warrior_tweaks.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						  WARRIOR KITS
//__________________________________________________________________________________
//__________________________________________________________________________________


//________________________CORSAIR___________________________________________________
BEGIN @3200
DESIGNATED 320

INCLUDE ~scales_of_balance/components/320_corsair.tpa~
//__________________________________________________________________________________


//_______________________BARBARIAN RANGER__________________________________________
BEGIN @3500
DESIGNATED 350

INCLUDE ~scales_of_balance/components/350_barbarian_ranger.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						   ROGUE TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @4000
DESIGNATED 400

INCLUDE ~scales_of_balance/components/400_rogue_tweaks.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    	ROGUE KITS
//__________________________________________________________________________________
//__________________________________________________________________________________


//__________________________SNIPER__________________________________________________
BEGIN @4100
DESIGNATED 410

INCLUDE ~scales_of_balance/components/410_sniper.tpa~
//__________________________________________________________________________________


//__________________________GALLANT_________________________________________________
BEGIN @4500
DESIGNATED 450

INCLUDE ~scales_of_balance/components/450_gallant.tpa~
//__________________________________________________________________________________


//_________________________LOREMASTER________________________________________________
BEGIN @4550
DESIGNATED 455

INCLUDE ~scales_of_balance/components/455_loremaster.tpa~
//__________________________________________________________________________________


//_________________________MEISTERSINGER____________________________________________
BEGIN @4600
DESIGNATED 460

INCLUDE ~scales_of_balance/components/460_meistersinger.tpa~
//__________________________________________________________________________________


//__________________________LORESINGER______________________________________________
BEGIN @4650
DESIGNATED 465

INCLUDE ~scales_of_balance/components/465_loresinger.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						     MONK TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @4900
DESIGNATED 490

INCLUDE ~scales_of_balance/components/490_monk_fist.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						     DIVINE TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @5000
DESIGNATED 500
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1

INCLUDE ~scales_of_balance/components/500_divine_tweaks.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							CLERIC KITS
//__________________________________________________________________________________
//__________________________________________________________________________________

//_________________________SELUNE___________________________________________________
BEGIN @5100
DESIGNATED 510
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1
REQUIRE_PREDICATE NOT FILE_EXISTS_IN_GAME ~cdselun.2da~ @6

INCLUDE ~scales_of_balance/components/510_selune.tpa~
//__________________________________________________________________________________


//__________________________SUNE____________________________________________________
BEGIN @5121
DESIGNATED 512
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1
//REQUIRE_PREDICATE NOT FILE_EXISTS_IN_GAME ~nmsune.2da~ @6
REQUIRE_PREDICATE (NOT GAME_IS ~iwdee~) @8

INCLUDE ~scales_of_balance/components/512_sune.tpa~
//__________________________________________________________________________________


//_________________________TYMORA___________________________________________________
BEGIN @5200
DESIGNATED 520
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1

INCLUDE ~scales_of_balance/components/520_tymora.tpa~
//__________________________________________________________________________________


//_________________________LEIRA______________________________________________________
BEGIN @5261
DESIGNATED 526
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1

INCLUDE ~scales_of_balance/components/526_leira.tpa~
//__________________________________________________________________________________


//__________________________SHAR____________________________________________________
BEGIN @5300
DESIGNATED 530
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1
//REQUIRE_PREDICATE NOT FILE_EXISTS_IN_GAME ~a#shar.2da~ @6

INCLUDE ~scales_of_balance/components/530_shar.tpa~
//__________________________________________________________________________________


//_________________________MALAR_____________________________________________________
BEGIN @5321
DESIGNATED 532
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1

INCLUDE ~scales_of_balance/components/532_malar.tpa~
//__________________________________________________________________________________


//_________________________BAERVAN__________________________________________________
BEGIN @5400
DESIGNATED 540
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1

INCLUDE ~scales_of_balance/components/540_baervan.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						DRUID TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @5800
DESIGNATED 580

INCLUDE ~scales_of_balance/components/580_druid_tweaks.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    	DRUID KITS
//__________________________________________________________________________________
//__________________________________________________________________________________

//_________________________PURIFIER_________________________________________________
BEGIN @5860
DESIGNATED 586

INCLUDE ~scales_of_balance/components/586_purifier.tpa~
//__________________________________________________________________________________


//_________________________ELEMENTALIST_____________________________________________
BEGIN @5880
DESIGNATED 588

INCLUDE ~scales_of_balance/components/588_elementalist.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						WIZARD TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @6000 
DESIGNATED 600

INCLUDE ~scales_of_balance/components/600_wizard_tweaks.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						MAGIC RESISTANCE OVERHAUL
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @6800
DESIGNATED 680
//REQUIRE_PREDICATE NOT GAME_IS ~iwdee~ @1

INCLUDE ~scales_of_balance/spells/mr_list_base.tpa~

INCLUDE ~scales_of_balance/components/680_mr_overhaul.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						SAVING THROW STANDARDIZATION
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @6900
DESIGNATED 690

INCLUDE ~scales_of_balance/spells/save_list_base.tpa~

INCLUDE ~scales_of_balance/components/690_spell_saving_throws.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						 MULTICLASS TWEAKS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @7000
DESIGNATED 700
FORBID_COMPONENT ~setup-divine_remix.tp2~ ~1000~ @1
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~CLSRCREQ.2da~ ~for EE and ToBEx games~

INCLUDE ~scales_of_balance/components/700_multiclass.tpa~
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						KITTED NPCS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @8001
DESIGNATED 800
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee tob bg2ee~ ~Imoen~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_FILCH.2da~ ~Spellfilcher not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_FILCH" = 1) BEGIN
		SET "d5_FILCH" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 13 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FILCH%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH1~ END
END

ACTION_IF GAME_IS ~tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_BYTE 0x246 ~%d5_FILCH%~ // changes kit
		WRITE_BYTE 0x247 0x40
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH1~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH2~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH3~ END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 13 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FILCH%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH1~ END
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_BYTE 0x246 ~%d5_FILCH%~ // changes kit
		WRITE_BYTE 0x247 0x40
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH1~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH2~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_FLCH3~ END
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8011
DESIGNATED 805
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee tob bg2ee~ ~Minsc~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_RBARB.2da~ ~Barbarian Ranger not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_RBARB" = 1) BEGIN
		SET "d5_RBARB" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~MINSC.cre~ ~override~
				~MINSC2.cre~ ~override~
				~MINSC4.cre~ ~override~
				~MINSC6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_RBARB%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~MINSC7.cre~ ~override~
				~MINSC8.cre~ ~override~
				~MINSC9.cre~ ~override~
				~MINSC10.cre~ ~override~
				~MINSC12.cre~ ~override~
				~MINSC14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_RBARB%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
/*
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~MINSC7.cre~ ~override~
				~MINSC8.cre~ ~override~
				~MINSC9.cre~ ~override~
				~MINSC10.cre~ ~override~
				~MINSC12.cre~ ~override~
				~MINSC14.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY

		COPY_EXISTING ~MINSC7.cre~ ~override~
				~MINSC8.cre~ ~override~
				~MINSC9.cre~ ~override~
				~MINSC10.cre~ ~override~
				~MINSC12.cre~ ~override~
				~MINSC14.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 91 1
			SET_BG2_PROFICIENCY 92 1
			SET_BG2_PROFICIENCY 95 1
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 98 1
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 107 1
			BUT_ONLY
	END
*/
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8022
DESIGNATED 810
REQUIRE_PREDICATE /* (GAME_IS ~tutu bgt bgee~) OR */ (FILE_EXISTS_IN_GAME ~zikhalid.cre.2da~) ~Khalid~
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~d5_forun.2da~) OR (FILE_EXISTS_IN_GAME ~d5_mieli.2da~) ~Khalid~
SUBCOMPONENT @8021 (FILE_EXISTS_IN_GAME ~d5_forun.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_FORUN" = 1) BEGIN
		SET "d5_FORUN" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~KHALID.cre~ THEN BEGIN
	COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FORUN%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL412~ END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FORUN%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL412~ END
END

/*
ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		BUT_ONLY
	COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 91 1
		SET_BG2_PROFICIENCY 92 1
		SET_BG2_PROFICIENCY 95 1
		SET_BG2_PROFICIENCY 96 1
		SET_BG2_PROFICIENCY 98 1
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 103 1
		SET_BG2_PROFICIENCY 105 1
		SET_BG2_PROFICIENCY 107 1
		BUT_ONLY
END
*/
//__________________________________________________________________________________

BEGIN @8023
DESIGNATED 811
SUBCOMPONENT @8021 (FILE_EXISTS_IN_GAME ~d5_mieli.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_mieli" = 1) BEGIN
		SET "d5_mieli" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~KHALID.cre~ THEN BEGIN
	COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 18 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_BYTE 0x23a 11
		WRITE_BYTE 0x23b 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_mieli%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14

	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 92 1
		SET_BG2_PROFICIENCY 95 1
		SET_BG2_PROFICIENCY 96 1
		SET_BG2_PROFICIENCY 97 1
		SET_BG2_PROFICIENCY 98 1
		SET_BG2_PROFICIENCY 100 1
		SET_BG2_PROFICIENCY 101 1
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 103 1
		SET_BG2_PROFICIENCY 105 1
		SET_BG2_PROFICIENCY 111 1
		SET_BG2_PROFICIENCY 112 1
		BUT_ONLY
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 18 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_BYTE 0x23a 11
		WRITE_BYTE 0x23b 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_mieli%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14

	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 92 1
		SET_BG2_PROFICIENCY 95 1
		SET_BG2_PROFICIENCY 96 1
		SET_BG2_PROFICIENCY 97 1
		SET_BG2_PROFICIENCY 98 1
		SET_BG2_PROFICIENCY 100 1
		SET_BG2_PROFICIENCY 101 1
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 103 1
		SET_BG2_PROFICIENCY 105 1
		SET_BG2_PROFICIENCY 111 1
		SET_BG2_PROFICIENCY 112 1
		BUT_ONLY
	END
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8033
DESIGNATED 815
REQUIRE_PREDICATE /* (GAME_IS ~tutu bgt bgee~) OR */ (FILE_EXISTS_IN_GAME ~p#kivan.cre~) ~Kivan~
SUBCOMPONENT @8031

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~KIVAN.cre~ ~override~
				~KIVAN4.cre~ ~override~
				~KIVAN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 35
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 35
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x08 // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
/*
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KIVAN.cre~ ~override~
				~KIVAN4.cre~ ~override~
				~KIVAN6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~KIVAN.cre~ ~override~
				~KIVAN4.cre~ ~override~
				~KIVAN6.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 91 1
			SET_BG2_PROFICIENCY 95 1
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 105 1
			BUT_ONLY
	END
*/
END

ACTION_IF FILE_EXISTS_IN_GAME ~p#kivan.cre~ THEN BEGIN
	COPY_EXISTING ~P#kivan.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 35
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 35
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x08 // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
/*
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~P#kivan.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~P#kivan.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 91 1
			SET_BG2_PROFICIENCY 95 1
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 105 1
			BUT_ONLY
	END

	ACTION_IF FILE_EXISTS_IN_GAME ~npclck.itm~ THEN BEGIN 
		COPY_EXISTING ~npclck.itm~ ~override~
					~npstaf.itm~ ~override~
			READ_BYTE 0x29 "avenger"
			WRITE_BYTE 0x29 ("%avenger%" BAND "0b01001000")
			BUT_ONLY
	END
*/
END
//__________________________________________________________________________________

BEGIN @8034
DESIGNATED 816
SUBCOMPONENT @8031 (GAME_IS ~tutu bgt bgee~)

COPY_EXISTING ~KIVAN.cre~ ~override~
				~KIVAN4.cre~ ~override~
				~KIVAN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x07 // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12

//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8043
DESIGNATED 820
REQUIRE_PREDICATE /* (GAME_IS ~tutu bgt bgee~) OR */ (FILE_EXISTS_IN_GAME ~o#coran.cre~) ~Coran~
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~d5_snipe.2da~) OR (FILE_EXISTS_IN_GAME ~d5_ADVEN.2da~) ~Coran~
SUBCOMPONENT @8041 (FILE_EXISTS_IN_GAME ~d5_snipe.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_snipe" = 1) BEGIN
		SET "d5_snipe" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~CORAN.cre~ ~override~
			~CORAN5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_snipe%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_ARMOV~ END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#coran.cre~ THEN BEGIN
	COPY_EXISTING ~O#coran.cre~ ~override~
			~O#cor25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_snipe%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_ARMOV~ END
	
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~O#coran.cre~ ~override~
				~O#cor25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~O#coran.cre~ ~override~
				~O#cor25.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 91 1
			SET_BG2_PROFICIENCY 95 1
			SET_BG2_PROFICIENCY 114 1
			SET_BG2_PROFICIENCY 113 1
			BUT_ONLY
	END

END
//__________________________________________________________________________________

BEGIN @8044
DESIGNATED 821
SUBCOMPONENT @8041 (FILE_EXISTS_IN_GAME ~d5_ADVEN.2da~)

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~CORAN.cre~ ~override~
				~CORAN5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#coran.cre~ THEN BEGIN
	COPY_EXISTING ~O#coran.cre~ ~override~
				~O#cor25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~O#coran.cre~ ~override~
				~O#cor25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~O#coran.cre~ ~override~
				~O#cor25.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 91 1
			SET_BG2_PROFICIENCY 95 1
			SET_BG2_PROFICIENCY 114 1
			SET_BG2_PROFICIENCY 113 1
			BUT_ONLY
	END

END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8052
DESIGNATED 825
REQUIRE_PREDICATE /* (GAME_IS ~tutu bgt bgee~) OR */ (FILE_EXISTS_IN_GAME ~O#bran.cre~) ~Branwen~
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~a#temp.2da~) OR (FILE_EXISTS_IN_GAME ~d5_tempu.2da~) ~Branwen~
SUBCOMPONENT @8051 (FILE_EXISTS_IN_GAME ~a#temp.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "a#temp" = 1) BEGIN
		SET "a#temp" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~BRANWE.cre~ ~override~
			~BRANWE5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#temp%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11

	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~BRANWE.cre~ ~override~
				~BRANWE5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~BRANWE.cre~ ~override~
				~BRANWE5.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 97 1
			SET_BG2_PROFICIENCY 100 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 112 1
			BUT_ONLY
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~O#bran.cre~ THEN BEGIN
	COPY_EXISTING ~O#bran.cre~ ~override~
			~O#bran25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#temp%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
	
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~O#bran.cre~ ~override~
				~O#bran25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~O#bran.cre~ ~override~
				~O#bran25.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 97 1
			SET_BG2_PROFICIENCY 92 1
			SET_BG2_PROFICIENCY 100 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 112 1
			BUT_ONLY
	END
END
//__________________________________________________________________________________

BEGIN @8053
DESIGNATED 826
SUBCOMPONENT @8051 (FILE_EXISTS_IN_GAME ~d5_tempu.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_TEMPU" = 1) BEGIN
		SET "d5_TEMPU" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~BRANWE.cre~ ~override~
				~BRANWE5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_TEMPU%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL152~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~d5_temp1~ END
END

ACTION_IF FILE_EXISTS_IN_GAME ~O#bran.cre~ THEN BEGIN
	COPY_EXISTING ~O#bran.cre~ ~override~
				~O#bran25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_TEMPU%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL152~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~d5_temp1~ END
END
//__________________________________________________________________________________

/* 

//__________________________________________________________________________________
BEGIN @8061
DESIGNATED 830
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Safana~

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_SWASH.2da~ THEN BEGIN
	COPY_EXISTING ~SAFANA.cre~ ~override~
				~SAFANA4.cre~ ~override~
				~SAFANA6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_SWASH.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
				PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_SWASH" = 1) BEGIN
			SET "d5_SWASH" = "%index%"-1
			SET "rows" = 0
			END
		END
	COPY_EXISTING ~SAFANA.cre~ ~override~
				~SAFANA4.cre~ ~override~
				~SAFANA6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_SWASH%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_SWASH~ END
END

//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8071
DESIGNATED 835
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~C#AJAN08.cre~) ~Ajantis~

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~AJANTI.cre~ ~override~
				~AJANTI4.cre~ ~override~
				~AJANTI6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 0
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x05 // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		WRITE_LONG 0x02a0 0x000 //removes known spells
		WRITE_LONG 0x02a4 0x000
		WRITE_LONG 0x02b0 0x000 // removes memorized spells
		WRITE_LONG 0x02b4 0x000

//	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_PADET.spl~ THEN BEGIN
//		COPY_EXISTING ~AJANTI.cre~ ~override~
//				~AJANTI4.cre~ ~override~
//				~AJANTI6.cre~ ~override~
//			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL212~ END
//			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL213~ END
//			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL231~ END
//			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL232~ END
//		COPY_EXISTING ~clabPA03.2da~ ~override~
//			LPM remove_blank_lines
//			APPEND_FILE ~scales_of_balance/paladin/inqclabbase.txt~
//	END
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_PADET.spl~ THEN BEGIN
		COPY_EXISTING ~AJANTI.cre~ ~override~
				~AJANTI4.cre~ ~override~
				~AJANTI6.cre~ ~override~
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_PAORA~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_PADET~ END
		COPY_EXISTING ~clabPA03.2da~ ~override~
			LPM remove_blank_lines
			APPEND_FILE ~scales_of_balance/paladin/inqclabbase.txt~
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~C#AJAN08.cre~ THEN BEGIN
	COPY_EXISTING ~C#AJAN08.cre~ ~override~
				~C#AJAN09.cre~ ~override~
				~C#AJAN10.cre~ ~override~
				~C#AJAN12.cre~ ~override~
				~C#AJAN14.cre~ ~override~
				~C#AJAN16.cre~ ~override~
				~C#AJATOB.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		WRITE_BYTE 0x0066 10
		WRITE_LONG 0x02a0 0x000 //removes known spells
		WRITE_LONG 0x02a4 0x000
		WRITE_LONG 0x02b0 0x000 // removes memorized spells
		WRITE_LONG 0x02b4 0x000
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_PADET~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_PAORA~ END

	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~C#AJAN08.cre~ ~override~
				~C#AJAN09.cre~ ~override~
				~C#AJAN10.cre~ ~override~
				~C#AJAN12.cre~ ~override~
				~C#AJAN14.cre~ ~override~
				~C#AJAN16.cre~ ~override~
				~C#AJATOB.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~C#AJAN08.cre~ ~override~
				~C#AJAN09.cre~ ~override~
				~C#AJAN10.cre~ ~override~
				~C#AJAN12.cre~ ~override~
				~C#AJAN14.cre~ ~override~
				~C#AJAN16.cre~ ~override~
				~C#AJATOB.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 97 1
			SET_BG2_PROFICIENCY 98 1
			SET_BG2_PROFICIENCY 100 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 111 1
			BUT_ONLY
	END
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8081
DESIGNATED 840
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Montaron~

COPY_EXISTING ~MONTAR.cre~ ~override~
			~MONTAR2.cre~ ~override~
			~MONTAR4.cre~ ~override~
			~MONTAR6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0A // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=54 target=1 timing=9 power=1 parameter1=1 parameter2=0 END

//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8092
DESIGNATED 845
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Faldorn~
SUBCOMPONENT @8091

COPY_EXISTING ~FALDOR.cre~ ~override~
			~FALDOR5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x12 // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~SPDR101~ END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=44 target=1 timing=9 power=1 parameter1=(-2) parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=10 target=1 timing=9 power=1 parameter1=(-2) parameter2=0 END
//__________________________________________________________________________________
BEGIN @8093
DESIGNATED 846
SUBCOMPONENT @8091 (FILE_EXISTS_IN_GAME ~d5_purif.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_purif" = 1) BEGIN
		SET "d5_purif" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~faldor.cre~ ~override~
		~faldor5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_purif%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8101
DESIGNATED 850
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Eldoth~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_JONGL.2da~ ~Jongleur kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_JONGL" = 1) BEGIN
			SET "d5_JONGL" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~ELDOTH.cre~ ~override~
			~ELDOTH5.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_JONGL%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END

//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8111
DESIGNATED 855
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Garrick~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_GALLA.2da~ ~Gallant kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_GALLA" = 1) BEGIN
			SET "d5_GALLA" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~GARRIC.cre~ ~override~
			~GARRIC2.cre~ ~override~
			~GARRIC4.cre~ ~override~
			~GARRIC6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_GALLA%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END

//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8121
DESIGNATED 860
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~alora09.cre~) ~Alora~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_MSADV.2da~ ~Misadventurer kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_MSADV" = 1) BEGIN
			SET "d5_MSADV" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~ALORA.cre~ ~override~
			~ALORA6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_MSADV%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
END

ACTION_IF FILE_EXISTS_IN_GAME ~alora09.cre~ THEN BEGIN
	COPY_EXISTING ~ALORA09.cre~ ~override~
				~ALORA25.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_MSADV%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
	
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~ALORA09.cre~ ~override~
				~ALORA25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			BUT_ONLY
		COPY_EXISTING ~ALORA09.cre~ ~override~
				~ALORA25.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 97 1
			SET_BG2_PROFICIENCY 100 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 103 1
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 112 1
			BUT_ONLY
	END
END
//__________________________________________________________________________________

*/

//__________________________________________________________________________________
BEGIN @8131
DESIGNATED 865
REQUIRE_PREDICATE /* (FILE_EXISTS_IN_GAME ~xan4.cre~) OR */ (FILE_EXISTS_IN_GAME ~O#xan09.cre~) ~Xan~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_BLADS.2da~ ~Bladesinger kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_BLADS" = 1) BEGIN
			SET "d5_BLADS" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~xan4.cre~ THEN BEGIN
	COPY_EXISTING ~XAN4.cre~ ~override~
				~XAN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 7 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_BLADS%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 90 2
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_BLAD1~ END

	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~XAN4.cre~ ~override~
					~XAN6.cre~ ~override~
				LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
				BUT_ONLY
		COPY_EXISTING ~XAN4.cre~ ~override~
					~XAN6.cre~ ~override~
				SET_BG2_PROFICIENCY 90 1
				SET_BG2_PROFICIENCY 95 1
				SET_BG2_PROFICIENCY 91 1
				SET_BG2_PROFICIENCY 96 1
				SET_BG2_PROFICIENCY 107 1
				SET_BG2_PROFICIENCY 113 1
				BUT_ONLY
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~xan.cre~ THEN BEGIN
	COPY_EXISTING ~XAN.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 7 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_BLADS%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 90 2
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_BLAD1~ END

	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~XAN.cre~ ~override~
				LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
				BUT_ONLY
		COPY_EXISTING ~XAN.cre~ ~override~
				SET_BG2_PROFICIENCY 90 1
				SET_BG2_PROFICIENCY 95 1
				SET_BG2_PROFICIENCY 91 1
				SET_BG2_PROFICIENCY 96 1
				SET_BG2_PROFICIENCY 107 1
				SET_BG2_PROFICIENCY 113 1
				BUT_ONLY
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#xan09.cre~ THEN BEGIN
	COPY_EXISTING ~o#xan09.cre~ ~override~
				~o#xan25.cre~ ~override~
		READ_SHORT 0x273 xanclass
		PATCH_IF ( xanclass = 7 ) BEGIN
			WRITE_SHORT 0x0234 1 // sets level to 1
			WRITE_SHORT 0x0235 1
			WRITE_SHORT 0x0236 1
			WRITE_SHORT 0x244 0
			WRITE_SHORT 0x246 0x4000 + ~%d5_BLADS%~ // changes kit
			WRITE_SHORT 0x0024 9
			WRITE_SHORT 0x0026 9
			WRITE_BYTE 0x0066 10
			SET_BG2_PROFICIENCY 90 2
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_BLAD1~ END
		END
		
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~O#XAN09.cre~ ~override~
					~O#XAN25.cre~ ~override~
			READ_SHORT 0x273 xanclass
			PATCH_IF ( xanclass = 7 ) BEGIN
				LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
			END
			BUT_ONLY
		COPY_EXISTING ~O#XAN09.cre~ ~override~
					~O#XAN25.cre~ ~override~
			READ_SHORT 0x273 xanclass
			PATCH_IF ( xanclass = 7 ) BEGIN
				SET_BG2_PROFICIENCY 90 1
				SET_BG2_PROFICIENCY 95 1
				SET_BG2_PROFICIENCY 91 1
				SET_BG2_PROFICIENCY 96 1
				SET_BG2_PROFICIENCY 107 1
				SET_BG2_PROFICIENCY 113 1
			END
			BUT_ONLY
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~sw1h13.itm~ THEN BEGIN
	COPY_EXISTING ~sw1h13.itm~ ~override~
		PATCH_IF (SOURCE_SIZE > 0x71) BEGIN
			READ_BYTE 0x1f fm 
			WRITE_BYTE 0x1f (fm BAND 0b11011111)
			READ_BYTE 0x31 prof
			PATCH_IF prof = 96 BEGIN
				WRITE_BYTE 0x31 90
				READ_LONG 0x54 "valid"
				PATCH_IF (%valid% >= 0) BEGIN
					READ_STRREF 0x54 "desc"
					INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
						REPLACE_TEXTUALLY ~Small Sword~ ~Longsword~
					END
					SAY_EVALUATED 0x54 ~%new_desc%~
				END
			END
		END
		BUT_ONLY
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8142
DESIGNATED 870
REQUIRE_PREDICATE NOT GAME_IS ~iwdee~ ~Viconia~
SUBCOMPONENT @8141 (FILE_EXISTS_IN_GAME ~d5_SHAR.2da~)

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_SHAR" = 1) BEGIN
			SET "d5_SHAR" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VICONI.cre~ ~override~
			~VICONI4.cre~ ~override~
			~VICONI6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_SHAR%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END

END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_SHAR" = 1) BEGIN
			SET "d5_SHAR" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VICONI.cre~ ~override~
			~VICONI4.cre~ ~override~
			~VICONI61.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_SHAR%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END

END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_COMPARE_CASE "d5_SHAR" = 0) BEGIN
			SET "d5_SHAR" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VICONI6.cre~ ~override~
			~VICONI8.cre~ ~override~
			~VICONI9.cre~ ~override~
			~VICONI11.cre~ ~override~
			~VICONI13.cre~ ~override~
			~VICONI16.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x0273 12 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_SHORT 0x0244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_SHAR%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END

END
//__________________________________________________________________________________

BEGIN @8143
DESIGNATED 871
SUBCOMPONENT @8141 (FILE_EXISTS_IN_GAME ~A#SHAR.2da~)

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "A#SHAR" = 1) BEGIN
			SET "A#SHAR" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VICONI.cre~ ~override~
			~VICONI4.cre~ ~override~
			~VICONI6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%A#SHAR%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END

END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "A#SHAR" = 1) BEGIN
			SET "A#SHAR" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VICONI.cre~ ~override~
			~VICONI4.cre~ ~override~
			~VICONI61.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%A#SHAR%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END

END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "A#SHAR" = 1) BEGIN
			SET "A#SHAR" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VICONI6.cre~ ~override~
			~VICONI8.cre~ ~override~
			~VICONI9.cre~ ~override~
			~VICONI11.cre~ ~override~
			~VICONI13.cre~ ~override~
			~VICONI16.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x0273 12 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_SHORT 0x0244 0
		WRITE_SHORT 0x246 0x4000 + ~%A#SHAR%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END

END
//__________________________________________________________________________________

BEGIN @8144
DESIGNATED 872
SUBCOMPONENT @8141

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~VICONI.cre~ ~override~
				~VICONI4.cre~ ~override~
				~VICONI6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
//		WRITE_SHORT 0x244 0
//		WRITE_SHORT 0x246 0x4000 + 0x12 // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		SET_BG2_PROFICIENCY 96 1

END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~VICONI.cre~ ~override~
				~VICONI4.cre~ ~override~
				~VICONI61.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
//		WRITE_SHORT 0x244 0
//		WRITE_SHORT 0x246 0x4000 + 0x12 // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		SET_BG2_PROFICIENCY 96 1

END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN

	COPY_EXISTING ~VICONI6.cre~ ~override~
				~VICONI8.cre~ ~override~
				~VICONI9.cre~ ~override~
				~VICONI11.cre~ ~override~
				~VICONI13.cre~ ~override~
				~VICONI16.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
//		WRITE_SHORT 0x244 0
//		WRITE_SHORT 0x246 0x4000 + 0x12 // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		SET_BG2_PROFICIENCY 96 1

END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8151
DESIGNATED 875
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Yoshimo~

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_SWASH.2da~ THEN BEGIN
	COPY_EXISTING ~YOSHI7.cre~ ~override~
				~YOSHI8.cre~ ~override~
				~YOSHI10.cre~ ~override~
				~YOSHI11.cre~ ~override~
				~YOSHI12.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_SWASH.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_SWASH" = 1) BEGIN
				SET "d5_SWASH" = "%index%"-1
				SET "rows" = 0
			END
		END
	BUT_ONLY

	COPY_EXISTING ~YOSHI7.cre~ ~override~
			~YOSHI8.cre~ ~override~
			~YOSHI10.cre~ ~override~
			~YOSHI11.cre~ ~override~
			~YOSHI12.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_SWASH%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_SWASH~ END
END

ACTION_IF FILE_EXISTS_IN_GAME ~npsw02.itm~ THEN BEGIN 
	COPY_EXISTING ~npsw02.itm~ ~override~
		READ_BYTE 0x2b "assassin"
		WRITE_BYTE 0x2b ("%assassin%" BAND "0b00000000")
		BUT_ONLY
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8162
DESIGNATED 880
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Valygar~
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~d5_mageh.2da~) OR (FILE_EXISTS_IN_GAME ~d5_nuwslm.d5~) ~Valygar~
SUBCOMPONENT @8161 (FILE_EXISTS_IN_GAME ~d5_mageh.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_MAGEH" = 1) BEGIN
			SET "d5_MAGEH" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VALYG8.cre~ ~override~
			~VALYG9.cre~ ~override~
			~VALYG11.cre~ ~override~
			~VALYG12.cre~ ~override~
			~VALYG14.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_MAGEH%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
//		LPF ADD_CRE_EFFECT INT_VAR opcode=44 target=1 timing=9 power=1 parameter1=-2 parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=10 target=1 timing=9 power=1 parameter1=-2 parameter2=0 END

ACTION_IF FILE_EXISTS_IN_GAME ~npsw04.itm~ THEN BEGIN 
	COPY_EXISTING ~npsw04.itm~ ~override~
		WRITE_SHORT 0x26 15
		WRITE_SHORT 0x2C 16
		WRITE_SHORT 0x30 14
		READ_BYTE 0x29 "avenger"
		WRITE_BYTE 0x29 ("%avenger%" BAND "0b01001000")
		BUT_ONLY
END
//__________________________________________________________________________________

BEGIN @8163
DESIGNATED 881
SUBCOMPONENT @8161 (FILE_EXISTS_IN_GAME ~d5_nuwslm.d5~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_NUWSL" = 1) BEGIN
			SET "d5_NUWSL" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VALYG8.cre~ ~override~
			~VALYG9.cre~ ~override~
			~VALYG11.cre~ ~override~
			~VALYG12.cre~ ~override~
			~VALYG14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 9 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_NUWSL%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		LPF ADD_CRE_EFFECT INT_VAR opcode=248 target=1 timing=9 power=0 resist_dispel=2 STR_VAR resource=~D5_WIZSA~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=248 target=1 timing=9 power=0 resist_dispel=2 STR_VAR resource=~D5_WIZSB~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=248 target=1 timing=9 power=0 resist_dispel=2 STR_VAR resource=~D5_WIZSC~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=37 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=36 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=34 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=35 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_WIZS2~ END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8172
DESIGNATED 885
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Nalia~
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~d5_chori.2da~) OR (FILE_EXISTS_IN_GAME ~d5_bendr.2da~) ~Nalia~
SUBCOMPONENT @8171 (FILE_EXISTS_IN_GAME ~d5_chori.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_CHORI" = 1) BEGIN
			SET "d5_CHORI" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~NALIA8.cre~ ~override~
			~NALIA10.cre~ ~override~
			~NALIA11.cre~ ~override~
			~NALIA13.cre~ ~override~
			~NALIA15.cre~ ~override~
			~NALIA18.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 5 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 10
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_CHORI%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~d5_CHORA~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_CHO11~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_CHO12~ END
//__________________________________________________________________________________

BEGIN @8173
DESIGNATED 886
SUBCOMPONENT @8171 (FILE_EXISTS_IN_GAME ~d5_bendr.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_bendr" = 1) BEGIN
			SET "d5_bendr" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~NALIA8.cre~ ~override~
			~NALIA10.cre~ ~override~
			~NALIA11.cre~ ~override~
			~NALIA13.cre~ ~override~
			~NALIA15.cre~ ~override~
			~NALIA18.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 14 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 10
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_bendr%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11

//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8181
DESIGNATED 890
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Haer'Dalis~

COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 5 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0F // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_JONGL.2da~ THEN BEGIN
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=73 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL542A~ END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_JONGL.2da~ THEN BEGIN
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL542A~ END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		SET_BG2_PROFICIENCY 91 1
		SET_BG2_PROFICIENCY 95 1
		SET_BG2_PROFICIENCY 114 1
END

ACTION_IF FILE_EXISTS_IN_GAME ~npsw05.itm~ THEN BEGIN 
	COPY_EXISTING ~npsw05.itm~ ~override~
				~npsw06.itm~ ~override~
		READ_BYTE 0x2b "skald"
		WRITE_BYTE 0x2b ("%skald%" BAND "0b01011111")
		BUT_ONLY
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8191
DESIGNATED 895
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Mazzy~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_HARTH.2da~ ~Hearthguard kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_HARTH" = 1) BEGIN
		SET "d5_HARTH" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_HARTH%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 2 END

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL827~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL826~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL676~ END
		ADD_CRE_ITEM ~BLUN21.itm~ #0 #0 #0 ~IDENTIFIED~ ~INV~
		ADD_CRE_ITEM ~SLNG04.itm~ #0 #0 #0 ~IDENTIFIED~ ~INV~

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 97 1
		SET_BG2_PROFICIENCY 91 1
		SET_BG2_PROFICIENCY 100 1
		SET_BG2_PROFICIENCY 101 1
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 103 1
		SET_BG2_PROFICIENCY 107 1
		SET_BG2_PROFICIENCY 112 1
END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		SET_BG2_PROFICIENCY 97 1
		SET_BG2_PROFICIENCY 91 1
		SET_BG2_PROFICIENCY 101 1
		SET_BG2_PROFICIENCY 107 2
		SET_BG2_PROFICIENCY 112 1
END
//__________________________________________________________________________________


//__________________________________________________________________________________
BEGIN @8201
DESIGNATED 900
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Aerie~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_FAST.2da~ ~Fastpaws kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_FAST" = 1) BEGIN
		SET "d5_FAST" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~AERIE6.cre~ ~override~
			~AERIE7.cre~ ~override~
			~AERIE9.cre~ ~override~
			~AERIE10.cre~ ~override~
			~AERIE11.cre~ ~override~
			~AERIE12.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FAST%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~AERIE6.cre~ ~override~
			~AERIE7.cre~ ~override~
			~AERIE9.cre~ ~override~
			~AERIE10.cre~ ~override~
			~AERIE11.cre~ ~override~
			~AERIE12.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~AERIE6.cre~ ~override~
			~AERIE7.cre~ ~override~
			~AERIE9.cre~ ~override~
			~AERIE10.cre~ ~override~
			~AERIE11.cre~ ~override~
			~AERIE12.cre~ ~override~
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 107 1
		SET_BG2_PROFICIENCY 111 1
END
//__________________________________________________________________________________

